<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Running A Single Prevalence Analysis • CohortPrevalence</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Running A Single Prevalence Analysis">
<meta property="og:description" content="CohortPrevalence">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CohortPrevalence</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/SinglePrevalenceAnalyses.html">Running A Single Prevalence Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Running A Single Prevalence Analysis</h1>
                        <h4 data-toc-skip class="author">Kelly Li</h4>
                        <h4 data-toc-skip class="author">Martin
Lavallee</h4>
            
      
      
      <div class="hidden name"><code>SinglePrevalenceAnalyses.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This tutorial walks you through running a
<code>CohortPrevalence</code> for a single yearly prevalence
analysis.</p>
</div>
<div class="section level2">
<h2 id="connection-details">Connection Details<a class="anchor" aria-label="anchor" href="#connection-details"></a>
</h2>
<p>We use the <code>ClinicalCharacteristics</code> package to specify
execution settings for the analysis with information on our databases
and schemas of interest, and connect to the databases using
<code>DatabaseConnector</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create Connection details via DatabaseConnector</span></span>
<span><span class="va">connectionDetails</span> <span class="op">&lt;-</span> <span class="fu">DatabaseConnector</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></span><span class="op">(</span></span>
<span>  dbms <span class="op">=</span> <span class="st">"dbms"</span>,</span>
<span>  user <span class="op">=</span> <span class="st">"ulysses"</span>,</span>
<span>  password <span class="op">=</span> <span class="st">"shh_secret"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create execution Settings</span></span>
<span><span class="va">executionSettings</span> <span class="op">&lt;-</span> <span class="fu">ClinicalCharacteristics</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ClinicalCharacteristics/man/createExecutionSettings.html" class="external-link">createExecutionSettings</a></span><span class="op">(</span></span>
<span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>  cdmDatabaseSchema <span class="op">=</span> <span class="va">cdmDatabaseSchema</span>, <span class="co"># schema containing patient data</span></span>
<span>  workDatabaseSchema <span class="op">=</span> <span class="va">workDatabaseSchema</span>, <span class="co"># schema to write to</span></span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="va">tempEmulationSchema</span>, <span class="co"># schema to write temporary tables to</span></span>
<span>  cohortTable <span class="op">=</span> <span class="va">cohortTable</span>, <span class="co"># table on the workDatabaseSchema containing cohort data</span></span>
<span>  cdmSourceName <span class="op">=</span> <span class="va">cdmSourceName</span> <span class="co"># human-readable database source name</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">connection</span> <span class="op">&lt;-</span> <span class="fu">DatabaseConnector</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/DatabaseConnector/reference/connect.html" class="external-link">connect</a></span><span class="op">(</span><span class="va">connectionDetails</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="defining-cohorts">Defining cohorts<a class="anchor" aria-label="anchor" href="#defining-cohorts"></a>
</h2>
<p>In this test case, we use <code>CapR</code> to generate a cohort of
hypertension patients in our OMOP database.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ohdsi.github.io/Capr/" class="external-link">Capr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make Capr concept set for Esse</span></span>
<span><span class="va">hypertensiveDisorder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/cs.html" class="external-link">cs</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/cs.html" class="external-link">descendants</a></span><span class="op">(</span><span class="fl">316866</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"Hypertensive disorder"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#fill out concept set details from vocabulary</span></span>
<span><span class="va">hypertensiveDisorder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/getConceptSetDetails.html" class="external-link">getConceptSetDetails</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">hypertensiveDisorder</span>, </span>
<span>  con <span class="op">=</span> <span class="va">connection</span>, </span>
<span>  vocabularyDatabaseSchema <span class="op">=</span> <span class="va">executionSettings</span><span class="op">$</span><span class="va">cdmDatabaseSchema</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make Capr cohort all by all to calculate prevalence</span></span>
<span><span class="va">cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/cohort.html" class="external-link">cohort</a></span><span class="op">(</span></span>
<span>  entry <span class="op">=</span> <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/entry.html" class="external-link">entry</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/conditionOccurrence.html" class="external-link">conditionOccurrence</a></span><span class="op">(</span>conceptSet <span class="op">=</span> <span class="va">hypertensiveDisorder</span><span class="op">)</span>,</span>
<span>    primaryCriteriaLimit <span class="op">=</span> <span class="st">"All"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  attrition <span class="op">=</span> <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/attrition.html" class="external-link">attrition</a></span><span class="op">(</span></span>
<span>    expressionLimit <span class="op">=</span> <span class="st">"All"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  exit <span class="op">=</span> <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/exit.html" class="external-link">exit</a></span><span class="op">(</span></span>
<span>    endStrategy <span class="op">=</span> <span class="fu"><a href="https://ohdsi.github.io/Capr/reference/fixedExit.html" class="external-link">fixedExit</a></span><span class="op">(</span>index <span class="op">=</span> <span class="st">"start"</span>, offsetDays <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># prepare cohort for CohortGenerator</span></span>
<span><span class="va">json</span> <span class="op">&lt;-</span> <span class="fu">compile</span><span class="op">(</span><span class="va">cohort</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">sql</span> <span class="op">&lt;-</span> <span class="fu">CirceR</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CirceR/reference/buildCohortQuery.html" class="external-link">buildCohortQuery</a></span><span class="op">(</span></span>
<span>  expression <span class="op">=</span> <span class="fu">CirceR</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CirceR/reference/cohortExpressionFromJson.html" class="external-link">cohortExpressionFromJson</a></span><span class="op">(</span><span class="va">json</span><span class="op">)</span>,</span>
<span>  options <span class="op">=</span> <span class="fu">CirceR</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CirceR/reference/createGenerateOptions.html" class="external-link">createGenerateOptions</a></span><span class="op">(</span>generateStats <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohortDefinitionSet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  cohortId <span class="op">=</span> <span class="fl">316866</span>,</span>
<span>  cohortName <span class="op">=</span> <span class="st">"hypertension"</span>,</span>
<span>  json <span class="op">=</span> <span class="va">json</span>,</span>
<span>  sql <span class="op">=</span> <span class="va">sql</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># build cohort tables for generation</span></span>
<span><span class="va">cohortTableNames</span> <span class="op">&lt;-</span> <span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/getCohortTableNames.html" class="external-link">getCohortTableNames</a></span><span class="op">(</span>cohortTable <span class="op">=</span> <span class="va">executionSettings</span><span class="op">$</span><span class="va">cohortTable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/createCohortTables.html" class="external-link">createCohortTables</a></span><span class="op">(</span></span>
<span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>  cohortDatabaseSchema <span class="op">=</span> <span class="va">executionSettings</span><span class="op">$</span><span class="va">workDatabaseSchema</span>,</span>
<span>  cohortTableNames <span class="op">=</span> <span class="va">cohortTableNames</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generate cohorts</span></span>
<span><span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/generateCohortSet.html" class="external-link">generateCohortSet</a></span><span class="op">(</span></span>
<span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>  cohortDatabaseSchema <span class="op">=</span> <span class="va">executionSettings</span><span class="op">$</span><span class="va">workDatabaseSchema</span>,</span>
<span>  tempEmulationSchema <span class="op">=</span> <span class="va">executionSettings</span><span class="op">$</span><span class="va">tempEmulationSchema</span>,</span>
<span>  cohortTableNames <span class="op">=</span> <span class="va">cohortTableNames</span>,</span>
<span>  cdmDatabaseSchema <span class="op">=</span> <span class="va">executionSettings</span><span class="op">$</span><span class="va">cdmDatabaseSchema</span>,</span>
<span>  cohortDefinitionSet <span class="op">=</span> <span class="va">cohortDefinitionSet</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check counts </span></span>
<span><span class="va">cohortCounts</span> <span class="op">&lt;-</span> <span class="fu">CohortGenerator</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/getCohortCounts.html" class="external-link">getCohortCounts</a></span><span class="op">(</span></span>
<span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>  cohortDatabaseSchema <span class="op">=</span> <span class="va">executionSettings</span><span class="op">$</span><span class="va">workDatabaseSchema</span>,</span>
<span>  cohortTable <span class="op">=</span> <span class="va">cohortTableNames</span><span class="op">$</span><span class="va">cohortTable</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohortCounts</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-1-cohorts-and-periods-of-interest">Step 1: Cohorts and periods of interest<a class="anchor" aria-label="anchor" href="#step-1-cohorts-and-periods-of-interest"></a>
</h2>
<p>The first step of the analysis is to specify the cohort of prevalent
interest and the periods of interest. In order to do so, we create the
<code>R6</code> classes that define these analyses settings. We can
select between yearly prevalence analyses or span prevalence analyses
using <code>createYearlyRange</code> and <code>createSpan</code>. Span
prevalence analyses are more flexible; you can choose to input a range
of starting and ending years, or specific dates (i.e. ‘2025-06-30’ to
‘2026-01-01’). By default, analyses where you only specify the year
start and end on the first day of the year (i.e. 2016-2017 translates to
‘2016-01-01’ to ‘2017-01-01’).</p>
<p>Sometimes, we may want to do an analysis on a subpopulation of the
overall database (i.e. prevalence of hypertension in sitagliptin users).
In this analysis, we care about the entire population, and so we leave
the <code>populationCohort</code> option <code>NULL</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prevalentCohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createPrevalenceCohort.html">createPrevalenceCohort</a></span><span class="op">(</span>cohortId <span class="op">=</span> <span class="fl">316866</span>,</span>
<span>                                          cohortName <span class="op">=</span> <span class="st">"Hypertension"</span><span class="op">)</span></span>
<span><span class="co"># Yearly prevalence for periods 2016-2017, 2017-2018, etc.</span></span>
<span><span class="va">periodOfInterest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createYearlyRange.html">createYearlyRange</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span><span class="op">:</span><span class="fl">2020</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Span prevalence for periods of interest 2016-2019, 2018-2019, and 2020-2025.</span></span>
<span><span class="va">periodOfInterestSpan</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createSpan.html">createSpan</a></span><span class="op">(</span>startDates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2018</span>, <span class="fl">2020</span><span class="op">)</span>,</span>
<span>                                             endDates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">2019</span>, <span class="fl">2025</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">populationCohort</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-2-prevalence-analysis-options">Step 2: Prevalence analysis options<a class="anchor" aria-label="anchor" href="#step-2-prevalence-analysis-options"></a>
</h2>
<p>Next, we define the options specific to the prevalence analysis. This
includes a choice of numerator and denominator computational technique.
<code>CohortPrevalence</code> uses operational definitions of prevalence
from <a href="https://pubmed.ncbi.nlm.nih.gov/30588119/" class="external-link">Rassen et
al</a>. Please see the vignette <code>prevalence</code> for definitions
of the numerator and denominator choices.</p>
<p>Beyond the numerator and denominator, we also create options for the
length of lookback (and whether we only want to use observed time in the
lookback), rate multiplier, minimum observation length, strata variables
(default age and gender), and whether or not we want to use only the
first observation period,</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">analysisId</span> <span class="op">&lt;-</span> <span class="fl">123</span> <span class="co"># Any unique integer ID to define this analysis</span></span>
<span></span>
<span><span class="co"># Select numerator and denominator options</span></span>
<span><span class="va">numeratorType</span> <span class="op">&lt;-</span> <span class="st">"pn1"</span> <span class="co">#pn1 or pn2</span></span>
<span><span class="va">denominatorType</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createDenominatorType.html">createDenominatorType</a></span><span class="op">(</span>denomType <span class="op">=</span> <span class="st">"pd3"</span><span class="op">)</span> <span class="co">#pd1, pd2, pd3, or pd4</span></span>
<span></span>
<span><span class="co"># Set lookback period options</span></span>
<span><span class="va">lookBackOptions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createLookBackOptions.html">createLookBackOptions</a></span><span class="op">(</span>lookBackDays <span class="op">=</span> <span class="fl">99999L</span>,</span>
<span>                                         useObservedTimeOnly <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set strata options - NULL by default uses age and gender</span></span>
<span><span class="va">strata</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># Set other specifications</span></span>
<span><span class="va">minimumObservationLength</span> <span class="op">&lt;-</span> <span class="fl">0L</span></span>
<span><span class="va">useOnlyFirstObservationPeriod</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span><span class="va">multiplier</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span></span>
<span><span class="va">prevalenceAnalysisClass</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createCohortPrevalenceAnalysis.html">createCohortPrevalenceAnalysis</a></span><span class="op">(</span></span>
<span>  analysisId <span class="op">=</span> <span class="va">analysisId</span>,</span>
<span>  prevalentCohort <span class="op">=</span> <span class="va">prevalentCohort</span>,</span>
<span>  periodOfInterest <span class="op">=</span> <span class="va">periodOfInterest</span>,</span>
<span>  lookBackOptions <span class="op">=</span> <span class="va">lookBackOptions</span>,</span>
<span>  numeratorType <span class="op">=</span> <span class="va">numeratorType</span>,</span>
<span>  denominatorType <span class="op">=</span> <span class="va">denominatorType</span>,</span>
<span>  minimumObservationLength <span class="op">=</span>  <span class="va">minimumObservationLength</span>,</span>
<span>  useOnlyFirstObservationPeriod <span class="op">=</span>  <span class="va">useOnlyFirstObservationPeriod</span>,</span>
<span>  multiplier <span class="op">=</span> <span class="va">multiplier</span>,</span>
<span>  strata <span class="op">=</span> <span class="va">strata</span>,</span>
<span>  populationCohort <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-3-run-analyses">Step 3: Run analyses<a class="anchor" aria-label="anchor" href="#step-3-run-analyses"></a>
</h2>
<p>The <code>prevalenceAnalysisClass</code> object is now a wrapped-up
package of all our analysis specifications. Using this object, we can
now run the analysis with <code>generateSinglePrevalence</code> and our
previously defined database connection settings.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Results</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateSinglePrevalence.html">generateSinglePrevalence</a></span><span class="op">(</span></span>
<span>  prevalenceAnalysisClass <span class="op">=</span> <span class="va">prevalenceAnalysisClass</span>,</span>
<span>  executionSettings <span class="op">=</span> <span class="va">executionSettings</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-4-export">Step 4: Export<a class="anchor" aria-label="anchor" href="#step-4-export"></a>
</h2>
<p>Now, we can write the results dataframe into <code>.csv</code> format
for sharing results with <code>exportPrevalenceResults</code> Sometimes,
we want to externally review the Sql queries used to generate the
prevalence objects. We can do this with
<code>exportPrevalenceQuery</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outputFolder</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"results"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export results to CSV format</span></span>
<span><span class="fu"><a href="../reference/exportPrevalenceResults.html">exportPrevalenceResults</a></span><span class="op">(</span></span>
<span>  results <span class="op">=</span> <span class="va">results</span>,</span>
<span>  outputFolder <span class="op">=</span> <span class="va">outputFolder</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save SQL query</span></span>
<span><span class="fu"><a href="../reference/exportPrevalenceQuery.html">exportPrevalenceQuery</a></span><span class="op">(</span></span>
<span>  prevalenceAnalysisClass <span class="op">=</span> <span class="va">prevalenceAnalysisClass</span>,</span>
<span>  outputFolder <span class="op">=</span> <span class="va">outputFolder</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Lavallee, Kelly Li.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
